# ДОКУМЕНТАЦИЯ НА ПРОЕКТА
## Web Shop - Платформа за обяви и продажби

**Версия:** 1.0  
**Дата:** Февруари 2026  
**Автор:** Георги Лазаров  
**Университет:** [Име на университет]  
**Специалност:** [Специалност]

---

## Съдържание

1. [Въведение](#1-въведение)
2. [Общ преглед на проекта](#2-общ-преглед-на-проекта)
3. [Архитектура на системата](#3-архитектура-на-системата)
4. [Технологичен стек](#4-технологичен-стек)
5. [Инсталация и конфигурация](#5-инсталация-и-конфигурация)
6. [Описание на функционалностите](#6-описание-на-функционалностите)
7. [API Документация](#7-api-документация)
8. [База данни](#8-база-данни)
9. [Frontend Архитектура](#9-frontend-архитектура)
10. [Backend Архитектура](#10-backend-архитектура)
11. [Сигурност](#11-сигурност)
12. [Тестване](#12-тестване)
13. [Разполагане](#13-разполагане)
14. [Бъдещи подобрения](#14-бъдещи-подобрения)
15. [Приложения](#15-приложения)

---

## 1. Въведение

### 1.1. Цел на документацията

Настоящата документация описва разработката, архитектурата, функционалностите и използването на Web Shop платформата - модерна уеб базирана система за обяви и продажби. Документацията е предназначена за разработчици, администратори и потребители на системата.

### 1.2. Обхват на проекта

Web Shop е пълнофункционална платформа за онлайн обяви, която позволява на потребителите да:
- Регистрират се и влизат в системата
- Създават и управляват собствени обяви
- Разглеждат обяви от различни категории
- Плащат за VIP статус на обявите
- Създават поръчки
- Комуникират чрез вградена система за съобщения
- Използват системата на три езика (български, английски, руски)

### 1.3. Целева аудитория

Документацията е предназначена за:
- **Разработчици** - които ще поддържат и разширяват системата
- **Системни администратори** - които ще разполагат и управляват системата
- **Тестери** - които ще тестват функционалностите
- **Потребители** - които ще използват системата

---

## 2. Общ преглед на проекта

### 2.1. Описание на системата

Web Shop е модерна уеб базирана платформа за обяви и продажби, разработена с използване на съвременни технологии. Системата предоставя интуитивен интерфейс за управление на обяви, комуникация между потребители и обработка на поръчки.

### 2.2. Основни цели

- **Лекота на използване** - интуитивен и модерен потребителски интерфейс
- **Многоезичност** - поддръжка на български, английски и руски език
- **Безопасност** - защита на потребителските данни и транзакции
- **Масштабируемост** - възможност за разширяване на функционалностите
- **Производителност** - бърза работа и отзивчивост

### 2.3. Ключови функционалности

1. **Управление на потребители** - Регистрация, вход, автентификация
2. **Управление на обяви** - CRUD, снимки, категории, VIP статус
3. **Система за плащания** - Stripe за VIP плащания
4. **Система за поръчки** - Създаване, управление на статуси
5. **Комуникация** - Съобщения между купувачи и продавачи
6. **Многоезичност** - Три езика, динамично превключване

### 2.4. Технически изисквания

- **Backend:** Java 17+, Spring Boot 3.2.2+
- **Frontend:** Node.js 18+, React 19+
- **База данни:** H2 Database (file-based)
- **Сървър:** Минимум 512MB RAM, 1GB дисково пространство

---

## 3. Архитектура на системата

### 3.1. Обща архитектура

Web Shop следва трислойна архитектура (3-tier):

```
┌─────────────────────────────────────────┐
│         Presentation Layer               │
│         (React Frontend)                 │
└─────────────────────────────────────────┘
                    │ HTTP/REST API
┌─────────────────────────────────────────┐
│         Application Layer                │
│         (Spring Boot Backend)            │
└─────────────────────────────────────────┘
                    │ JPA/Hibernate
┌─────────────────────────────────────────┐
│         Data Layer (H2 Database)         │
└─────────────────────────────────────────┘
```

### 3.2. Frontend компоненти

App.tsx → Header, RegisterPage, LoginPage, CreateListingForm, ItemList, ItemCard, ItemDetail, VipListingsPage, VipPaymentForm, MessagesPage, OrdersPage, FavoritesPage

### 3.3. Backend компоненти

**Controllers:** AuthController, ItemController, FileUploadController, MessageController, VipPaymentController, FavoriteController, ItemOrderController, HealthController

**Services:** UserService, ItemService, MessageService, VipPaymentService, ItemOrderService

**Repositories:** UserRepository, ItemRepository, MessageRepository, VipPaymentRepository, FavoriteRepository, ItemOrderRepository

---

## 4. Технологичен стек

### 4.1. Frontend
- React 19.2.0, TypeScript 5.9.3, Vite 7.2.4, CSS3

### 4.2. Backend
- Java 17, Spring Boot 3.2.2, Spring Security, Spring Data JPA, H2 Database, Stripe Java SDK

### 4.3. Deployment
- Vercel (frontend), Render.com (backend), GitHub

---

## 5. Инсталация и конфигурация

### 5.1. Backend
```bash
cd backend/web-shop
./mvnw spring-boot:run
```

### 5.2. Frontend
```bash
cd web-shop-frontend
npm install
npm run dev
```

### 5.3. Environment Variables
- **Backend:** STRIPE_SECRET_KEY
- **Frontend:** VITE_API_BASE_URL (или VITE_API_BASE)

---

## 6. Описание на функционалностите

### 6.1. Регистрация и вход
- Email, парола (мин. 8 символа, специален символ), пълно име
- BCrypt хеширане, localStorage за сесия

### 6.2. Управление на обяви
- Създаване, редактиране, изтриване
- Качване на снимки (компресия до 800KB, 1280px)
- VIP статус срещу 2€

### 6.3. Поръчки и съобщения
- Форма за поръчка с доставка и плащане
- Съобщения между купувач и продавач
- Ревюта и оценки (1-5 звезди)

---

## 7. API Документация

### Base URL
- Development: `http://localhost:8080`
- Production: `https://webshop-e6dx.onrender.com`

### Основни endpoints

| Метод | Endpoint | Описание |
|-------|----------|----------|
| POST | /auth/register | Регистрация |
| POST | /auth/login | Вход |
| GET | /items | Всички обяви |
| GET | /items/{id} | Детайли за обява |
| POST | /items | Създаване на обява |
| PUT | /items/{id} | Редактиране |
| DELETE | /items/{id} | Изтриване |
| POST | /upload/{itemId} | Качване на снимка |
| POST | /vip-payment/create | VIP плащане - създаване |
| POST | /vip-payment/complete | VIP плащане - завършване |
| POST | /item-orders | Създаване на поръчка |
| GET | /items/{itemId}/reviews | Ревюта |
| POST | /items/{itemId}/messages | Изпращане на съобщение |
| GET | /health, /items/ping | Health check |

*За пълни request/response примери вижте оригиналната техническа документация.*

---

## 8. База данни

### Таблици
- USER, ITEM, REVIEW, ITEM_ORDER, VIP_PAYMENT, MESSAGE, FAVORITE

### Файл
- `backend/web-shop/data/webshopdb.mv.db`

### H2 Console
- `http://localhost:8080/h2-console`

---

## 9. Frontend Архитектура

- **State:** useState, localStorage (loggedInEmail)
- **Routing:** Условен рендеринг чрез view state
- **API:** fetch с AbortController, timeout
- **Многоезичност:** translations.ts (bg, en, ru)
- **Компресия на снимки:** Canvas, max 1280px, 800KB

---

## 10. Backend Архитектура

- **Controllers:** @RestController, валидация, логване
- **Services:** @Transactional, бизнес логика
- **Repositories:** JpaRepository

---

## 11. Сигурност

- BCrypt за пароли
- JPA предотвратява SQL injection
- React escape-ва HTML (XSS)
- CORS конфигуриран
- Stripe за плащания (PCI DSS)

---

## 12. Тестване

- Manual testing на основните потоци
- Unit/Integration тестове (при наличие)
- Performance: cold start ~50-60 сек на Render

---

## 13. Разполагане

- **Vercel:** Frontend, npm run build, dist/
- **Render:** Backend, Java, Maven
- **UptimeRobot:** Ping /items/ping на всеки 10 мин за cold start

---

## 14. Бъдещи подобрения

- JWT автентификация
- Full-text search
- Email уведомления
- Административен панел
- PostgreSQL за production
- Множество снимки на обява

---

## 15. Приложения

### Приложение А. Глосар
API, BCrypt, CORS, CSRF, DTO, Entity, JPA, JWT, REST, Stripe, XSS

### Приложение Б. Полезни команди
```bash
# Backend
mvn spring-boot:run

# Frontend
npm install && npm run dev
```

### Приложение В. Създаване на отделна техническа документация

За пълна техническа документация с всички request/response примери, диаграми, troubleshooting guide и code examples, създайте отделен файл или разширете този при необходимост.

---

**Край на техническата документация**

*Документацията е създадена на Февруари 2026. Версия 1.0.*

---

## Връзка с дипломната документация

Тази техническа документация е допълнение към **ДОКУМЕНТАЦИЯ.md** (дипломната работа). ДОКУМЕНТАЦИЯ.md следва официалната структура за дипломна работа (Увод, Глава 1-4, Заключение, Приложение) и е предназначена за поднасяне. Настоящата техническа документация е справочник за разработчици и може да се приложи отделно на CD/flash заедно с сорс кода.
