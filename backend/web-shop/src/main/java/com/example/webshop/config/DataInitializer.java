package com.example.webshop.config;

import com.example.webshop.models.Item;
import com.example.webshop.repositories.ItemRepository;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.boot.CommandLineRunner;
import org.springframework.stereotype.Component;

@Component
public class DataInitializer implements CommandLineRunner {

    private static final Logger logger = LoggerFactory.getLogger(DataInitializer.class);
    private final ItemRepository itemRepository;

    public DataInitializer(ItemRepository itemRepository) {
        this.itemRepository = itemRepository;
    }

    @Override
    public void run(String... args) {
        // Добавяме примерни обяви само ако базата данни е празна
        if (itemRepository.count() == 0) {
            logger.info("Базата данни е празна. Няма добавени примерни обяви.");
        } else {
            logger.info("Базата данни вече съдържа обяви. Пропускам инициализацията.");
        }
    }

    private void createSampleItems() {
        // Примерните обяви са премахнати – базата започва празна
        if (false) { // disabled
        createItem("iPhone 13 Pro - Отлично състояние",
                "Продавам iPhone 13 Pro 256GB в отлично състояние. Телефонът е с оригинален калъф и защитно стъкло от първия ден. Няма драскотини или дефекти. Включени са оригиналното зареждане и кутията.",
                1200.00, "Електроника", "0888123456", "https://images.unsplash.com/photo-1592899677977-9c10ca588bbd?w=800&h=600&fit=crop&q=80");

        createItem("Samsung 55\" 4K Smart TV",
                "Продавам Samsung 55-инчов 4K Smart телевизор. Телевизорът е в отлично състояние, с всички аксесоари и дистанционно. Идеален за голяма всекидневна.",
                600.00, "Електроника", "0888123457", "https://images.unsplash.com/photo-1593359677879-a4bb92f829d1?w=800&h=600&fit=crop&q=80");

        createItem("MacBook Pro 14\" M1 - 2021г.",
                "MacBook Pro 14 инча с чип M1, 16GB RAM, 512GB SSD. Лаптопът е в отлично състояние, използван предимно за работа. Включва оригиналното зареждане и кутията.",
                1800.00, "Електроника", "0888123458", "https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=800&h=600&fit=crop&q=80");

        createItem("Sony PlayStation 5 - Конзола",
                "PlayStation 5 конзола в отлично състояние. Включва оригиналния контролер, кабели и кутия. Има няколко игри на дискове.",
                550.00, "Електроника", "0888123459", "https://images.unsplash.com/photo-1606813907291-d86efa9b94db?w=800&h=600&fit=crop&q=80");

        createItem("AirPods Pro 2 - Безжични слушалки",
                "Apple AirPods Pro 2-ро поколение. Слушалките са в отлично състояние, с оригиналната кутия и кабел за зареждане. Активен шумопоглъщане.",
                200.00, "Електроника", "0888123460", "https://images.unsplash.com/photo-1606220945770-b5b6c2c55bf1?w=800&h=600&fit=crop&q=80");

        createItem("Canon EOS R6 - Фотоапарат",
                "Зеркален фотоапарат Canon EOS R6 с обектив 24-105mm. Камерата е професионална, в отлично състояние. Включва батерия, зареждане и кутия.",
                2200.00, "Електроника", "0888123461", "https://images.unsplash.com/photo-1516035069371-29a1b244cc32?w=800&h=600&fit=crop&q=80");

        createItem("iPad Air 5 - Таблет",
                "iPad Air 5-то поколение, 256GB, Wi-Fi. Таблетът е в отлично състояние, с защитно стъкло и калъф. Идеален за работа и забавление.",
                750.00, "Електроника", "0888123462", "https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0?w=800&h=600&fit=crop&q=80");

        // ========== КНИГИ (7 обяви) ==========
        createItem("Колекция от класически романи",
                "Продавам колекция от 15 класически романа на български език. Книгите са в отлично състояние, някои са с твърди корици. Включва произведения на Иван Вазов, Елин Пелин, Йордан Йовков и други.",
                45.00, "Книги", "0888765432", "https://images.unsplash.com/photo-1544947950-fa07a98d237f?w=800&h=600&fit=crop&q=80");

        createItem("Учебници за университет - Икономика",
                "Колекция от учебници по икономика за университет. Книгите са в добро състояние, с подчертавания и бележки. Подходящи за студенти по икономика и бизнес администрация.",
                60.00, "Книги", "0888765433", "https://images.unsplash.com/photo-1506880018603-83d5b814b5a6?w=800&h=600&fit=crop&q=80");

        createItem("Хари Потър - Пълна колекция (7 книги)",
                "Пълна колекция от всички 7 книги на Хари Потър на български език. Книгите са в отлично състояние, с твърди корици. Идеален подарък за почитатели на поредицата.",
                120.00, "Книги", "0888765434", "https://images.unsplash.com/photo-1544947950-fa07a98d237f?w=800&h=600&fit=crop&q=80");

        createItem("Исторически романи - Колекция",
                "Колекция от 10 исторически романа на различни автори. Книгите са в добро състояние, подходящи за любители на историята и литературата.",
                50.00, "Книги", "0888765435", "https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=800&h=600&fit=crop&q=80");

        createItem("Детски книги - Приказки и истории",
                "Колекция от детски книги - приказки, истории и образователни материали. Подходящи за деца от 3 до 10 години. Книгите са в отлично състояние.",
                35.00, "Книги", "0888765436", "https://images.unsplash.com/photo-1543002588-bfa74002ed7e?w=800&h=600&fit=crop&q=80");

        createItem("Научна фантастика - Колекция",
                "Колекция от 12 романа на научна фантастика от различни автори. Включва произведения на Айзък Азимов, Артър Кларк и други класици на жанра.",
                55.00, "Книги", "0888765437", "https://images.unsplash.com/photo-1532012197267-da84d127e765?w=800&h=600&fit=crop&q=80");

        createItem("Биографии и мемоари",
                "Колекция от биографии и мемоари на известни личности. Книгите са в добро състояние, подходящи за любители на биографичната литература.",
                40.00, "Книги", "0888765438", "https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?w=800&h=600&fit=crop&q=80");

        // ========== ДРЕХИ (7 обяви) ==========
        createItem("Зимно палто - Размер M",
                "Елегантно зимно палто от вълна, размер M. Палтото е в отлично състояние, използвано само една зима. Цвят: тъмно сиво. Подходящо за мъже.",
                80.00, "Дрехи", "0888999888", "https://images.unsplash.com/photo-1551028719-00167b16eac5?w=800&h=600&fit=crop&q=80");

        createItem("Дамски рокля - Размер S",
                "Елегантна дамска рокля за официални събития. Размер S, цвят: черно. Роклята е в отлично състояние, използвана само веднъж.",
                65.00, "Дрехи", "0888999889", "https://images.unsplash.com/photo-1595777457583-95e059d581b8?w=800&h=600&fit=crop&q=80");

        createItem("Мъжки костюм - Размер L",
                "Класически мъжки костюм, размер L. Костюмът е в отлично състояние, подходящ за бизнес срещи и официални събития. Цвят: тъмно сиво.",
                150.00, "Дрехи", "0888999890", "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=800&h=600&fit=crop&q=80");

        createItem("Дамски обувки - Размер 38",
                "Елегантни дамски обувки с висок ток, размер 38. Обувките са в добро състояние, с леки следи от употреба. Цвят: черно.",
                45.00, "Дрехи", "0888999891", "https://images.unsplash.com/photo-1543163521-1bf539c55dd2?w=800&h=600&fit=crop&q=80");

        createItem("Мъжки джакет - Размер M",
                "Спортен мъжки джакет, размер M. Джакетът е в отлично състояние, подходящ за ежедневна употреба. Цвят: синьо.",
                55.00, "Дрехи", "0888999892", "https://images.unsplash.com/photo-1551488831-00ddcb6c6bd3?w=800&h=600&fit=crop&q=80");

        createItem("Дамска чанта - Designer",
                "Елегантна дамска чанта от висококачествена кожа. Чантата е в отлично състояние, с оригинални аксесоари. Цвят: кафяв.",
                90.00, "Дрехи", "0888999893", "https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=800&h=600&fit=crop&q=80");

        createItem("Детски дрехи - Комплект",
                "Комплект детски дрехи за момче, размер 6-7 години. Включва панталони, риза и пуловер. Всички дрехи са в отлично състояние.",
                30.00, "Дрехи", "0888999894", "https://images.unsplash.com/photo-1503341504253-dff4815485f1?w=800&h=600&fit=crop&q=80");

        // ========== СПОРТ (7 обяви) ==========
        createItem("Велосипед Trek Mountain Bike",
                "Горски велосипед Trek в отлично състояние. Подходящ за планинарство и градско каране. Включва велосипедна каска и велосипедна чанта. Размер на рамката: M.",
                350.00, "Спорт", "0888111222", "https://imageio.forbes.com/specials-images/imageserve/5db21122a210800006f05fee/Trek/0x0.png?format=png&crop=1234,839,x46,y37,safe&width=960");

        createItem("Бегова пътека за фитнес",
                "Електрическа бегова пътека за дома. Подходяща за кардио тренировки. Пътеката е в добро състояние, с леки следи от употреба. Максимална скорост: 12 km/h.",
                400.00, "Спорт", "0888111223", "https://kmsport.bg/image/catalog/Fitness%20equipment/Treadmills/Z2000/res_12ccc6db8c9fd7a221d6edc41b3a72b6-1.jpg");

        createItem("Фитнес уреди - Комплект",
                "Комплект фитнес уреди за дома: дъмбели, ковче за тренировки, фитнес топка. Всички уреди са в отлично състояние, подходящи за домашни тренировки.",
                120.00, "Спорт", "0888111224", "https://frankfurt.apollo.olxcdn.com/v1/files/n18ig1jt5w751-BG/image;s=2000x1389");

        createItem("Ски оборудване - Комплект",
                "Пълен комплект ски оборудване: ски, ски обувки, стапки и каска. Оборудването е в добро състояние, подходящо за начинаещи и напреднали.",
                280.00, "Спорт", "0888111225", "https://frankfurt.apollo.olxcdn.com/v1/files/b01ylk0ww5o91-BG/image;s=867x1156");

        createItem("Тенис ракета и топки",
                "Професионална тенис ракета с комплект топки. Ракетата е в отлично състояние, подходяща за игра на тенис. Включва и ракетна чанта.",
                85.00, "Спорт", "0888111226", "https://cdn5.focus.bg/bazar/ac/pics/ac719faf5ad11a086ca4e43d0ab8d3a0.jpg");

        createItem("Футболна топка - Професионална",
                "Професионална футболна топка в отлично състояние. Подходяща за тренировки и мачове. Топката е с официален размер и тегло.",
                35.00, "Спорт", "0888111227", "https://brosbg.com/uploads/adidas-originalna-futbolna-topka-euro24-pro-product-big-25542-6-5399754158.jpg");

        createItem("Йога комплект",
                "Пълен комплект за йога: йога килим, блокове, ремък и торба. Комплектът е в отлично състояние, подходящ за практикуване на йога у дома.",
                50.00, "Спорт", "0888111228", "https://images.unsplash.com/photo-1506126613408-eca07ce68773?w=800&h=600&fit=crop&q=80");

        // ========== ДОМ И ГРАДИНА (7 обяви) ==========
        createItem("Мебели за хранене - Маса и 4 стола",
                "Комплект мебели за хранене: маса и 4 стола от дърво. Мебелите са в добро състояние, с леки следи от употреба. Подходящи за малка трапезария или кухня.",
                250.00, "Дом и градина", "0888333444", "https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=800&h=600&fit=crop&q=80");

        createItem("Диван - Триместен",
                "Удобен триместен диван в отлично състояние. Диванът е с леко износване, но много удобен. Цвят: бежов. Подходящ за всекидневна.",
                300.00, "Дом и градина", "0888333445", "https://images.unsplash.com/photo-1555041469-a586c61ea9bc?w=800&h=600&fit=crop&q=80");

        createItem("Хладилник - Двукамерен",
                "Двукамерен хладилник в отлично работно състояние. Хладилникът е с леко износване отвън, но работи перфектно. Размер: стандартен.",
                200.00, "Дом и градина", "0888333446", "https://tipihome.eu/wp-content/uploads/2021/02/20210212_173412-scaled.jpg");

        createItem("Градински инструменти - Комплект",
                "Комплект градински инструменти: лопата, вила, мотика, ножици. Всички инструменти са в добро състояние, подходящи за градинарство.",
                60.00, "Дом и градина", "0888333447", "https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=800&h=600&fit=crop&q=80");

        createItem("Пералня - Автоматична",
                "Автоматична пералня в отлично работно състояние. Пералнята е с леко износване, но работи перфектно. Размер: стандартен.",
                180.00, "Дом и градина", "0888333448", "https://media.karousell.com/media/photos/products/2022/2/21/bosch_washing_machine_1645437149_6ba7cfc6_progressive.jpg");

        createItem("Градински мебели - Комплект",
                "Комплект градински мебели: маса и 4 стола за градина. Мебелите са от устойчив материал, подходящи за използване навън.",
                150.00, "Дом и градина", "0888333449", "https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?w=800&h=600&fit=crop&q=80");

        createItem("Кухненски уреди - Комплект",
                "Комплект кухненски уреди: микровълнова, тостер, кафе машина. Всички уреди са в добро работно състояние.",
                100.00, "Дом и градина", "0888333450", "https://images.unsplash.com/photo-1556912172-45b7abe8b7e1?w=800&h=600&fit=crop&q=80");

        // ========== АВТОМОБИЛИ (7 обяви) ==========
        createItem("Volkswagen Golf 1.6 TDI - 2015г.",
                "Продавам VW Golf 1.6 TDI от 2015 година. Автомобилът е в отлично техническо състояние, редовно обслужван. Пробег: 120 000 км. Цвят: сребрист металик. Включва зимни и летни гуми.",
                8500.00, "Автомобили", "0888555666", "https://www.4tuning.ro/images/vw-golf-1-6-tdi-2015/vw-golf-1-6-tdi-2015-df74cf183d7a817e04-0-0-0-0-0.jpg");

        createItem("BMW 320d - 2018г.",
                "BMW 320d от 2018 година в отлично състояние. Автомобилът е редовно обслужван, без инциденти. Пробег: 80 000 км. Цвят: черен металик.",
                18000.00, "Автомобили", "0888555667", "https://cdn.ennxo.com/uploads/products/640/eb117c3ebb0844e987916ac8ced81be2.jpg");

        createItem("Opel Corsa 1.4 - 2012г.",
                "Opel Corsa 1.4 от 2012 година. Автомобилът е в добро техническо състояние, подходящ за градско каране. Пробег: 150 000 км. Цвят: бял.",
                3500.00, "Автомобили", "0888555668", "https://a.d-cd.net/b9f7e4es-1920.jpg");

        createItem("Audi A4 2.0 TDI - 2016г.",
                "Audi A4 2.0 TDI от 2016 година. Автомобилът е в отлично състояние, с пълен сервизен книжка. Пробег: 100 000 км. Цвят: сребрист.",
                15000.00, "Автомобили", "0888555669", "https://g1-bg.cars.bg/2023-06-03_2/647b10637cd45f3426012803o.jpg");

        createItem("Renault Clio 1.2 - 2014г.",
                "Renault Clio 1.2 от 2014 година. Малък и икономичен автомобил, подходящ за градско каране. Пробег: 110 000 км. Цвят: червен.",
                4500.00, "Автомобили", "0888555670", "https://images.kavak.services/images/284611/EXTERIOR-frontSidePilotNear-1699362355142.jpeg");

        createItem("Mercedes-Benz C220 - 2017г.",
                "Mercedes-Benz C220 от 2017 година. Автомобилът е в отлично състояние, с всички екстри. Пробег: 90 000 км. Цвят: черен металик.",
                22000.00, "Автомобили", "0888555671", "https://img.autotrader.co.za/28355943/Fit640x480");

        createItem("Toyota Corolla 1.6 - 2013г.",
                "Toyota Corolla 1.6 от 2013 година. Надежден и икономичен автомобил. Пробег: 140 000 км. Цвят: сребрист. Включва зимни и летни гуми.",
                6000.00, "Автомобили", "0888555672", "https://a.d-cd.net/bfa10f8s-1920.jpg");

        // ========== ДРУГИ (7 обяви) ==========
        createItem("Музикални инструменти - Акустична китара",
                "Акустична китара в отлично състояние. Подходяща за начинаещи и напреднали. Включва китарна чанта и резервни струни.",
                150.00, "Други", "0888666777", "https://images.unsplash.com/photo-1516924962500-2b4b3b99ea02?w=800&h=600&fit=crop&q=80");

        createItem("Музикален център - Hi-Fi система",
                "Hi-Fi музикален център с висококачествен звук. Системата е в отлично състояние, включва CD плейър, радио и Bluetooth.",
                250.00, "Други", "0888666778", "https://www.radiomuseum.org/images/radio/technics/8_track_cartridge_4ch_2ch_record_2971742.jpg");

        createItem("Картини и изкуство - Колекция",
                "Колекция от картини и художествени произведения. Включва различни стилове и размери. Подходящи за декорация на дома.",
                180.00, "Други", "0888666779", "https://images.unsplash.com/photo-1578301978018-3005759f48f7?w=800&h=600&fit=crop&q=80");

        createItem("Антики и колекционерски предмети",
                "Колекция от антики и колекционерски предмети. Включва стари монети, марки и други колекционерски артикули.",
                200.00, "Други", "0888666780", "https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800&h=600&fit=crop&q=80");

        createItem("Музикални инструменти - Пиано",
                "Електрическо пиано в отлично състояние. Подходящо за начинаещи и напреднали пианисти. Включва стойка и педал.",
                400.00, "Други", "0888666781", "https://images.unsplash.com/photo-1520523839897-bd0b52f945a0?w=800&h=600&fit=crop&q=80");

        createItem("Играчки и игри - Колекция",
                "Колекция от настолни игри и играчки за деца и възрастни. Всички игри са в отлично състояние, с всички части.",
                70.00, "Други", "0888666782", "https://images.unsplash.com/photo-1606092195730-5d7b9af1efc5?w=800&h=600&fit=crop&q=80");

        createItem("Бижута и аксесоари - Колекция",
                "Колекция от бижута и аксесоари. Включва различни стилове и материали. Подходящи за подаръци или лична употреба.",
                90.00, "Други", "0888666783", "https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?w=800&h=600&fit=crop&q=80");
        }
    }

    private void createItem(String title, String description, double price, String category, String phone) {
        createItem(title, description, price, category, phone, null);
    }

    private void createItem(String title, String description, double price, String category, String phone, String imageUrl) {
        Item item = new Item();
        item.setTitle(title);
        item.setDescription(description);
        item.setPrice(price);
        item.setCategory(category);
        item.setOwnerEmail("demo@example.com");
        item.setContactEmail("demo@example.com");
        item.setContactPhone(phone);
        if (imageUrl != null) {
            item.setImageUrl(imageUrl);
        }
        itemRepository.saveAndFlush(item);
    }
}
